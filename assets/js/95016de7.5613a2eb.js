"use strict";(self.webpackChunkmy_demo=self.webpackChunkmy_demo||[]).push([[9082],{4493:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>p,frontMatter:()=>o,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"GSTREAMER/working_pcp","title":"working_pcp","description":"Here\u2019s a breakdown of the working principle of the remap operation under the given conditions, formatted in Markdown:","source":"@site/docs/GSTREAMER/working_pcp.md","sourceDirName":"GSTREAMER","slug":"/GSTREAMER/working_pcp","permalink":"/jayden/docs/GSTREAMER/working_pcp","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/GSTREAMER/working_pcp.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"architecture_gstreamer","permalink":"/jayden/docs/GSTREAMER/architecture_gstreamer"},"next":{"title":"Docusaurus Tutorial","permalink":"/jayden/docs/intro"}}');var s=r(4848),t=r(8453);const o={sidebar_position:3},l="Working Principle of the Remap Operation on Renesas RZ/G2L",a={},c=[{value:"<strong>1. Input Sources</strong>",id:"1-input-sources",level:2},{value:"<strong>2. Pre-Computed Mapping Tables</strong>",id:"2-pre-computed-mapping-tables",level:2},{value:"<strong>3. Runtime Remap Process</strong>",id:"3-runtime-remap-process",level:2},{value:"<strong>Steps</strong>:",id:"steps",level:3},{value:"<strong>4. Hardware Acceleration on Renesas RZ/G2L</strong>",id:"4-hardware-acceleration-on-renesas-rzg2l",level:2},{value:"<strong>5. GStreamer Pipeline for Remap</strong>",id:"5-gstreamer-pipeline-for-remap",level:2},{value:"<strong>Pipeline Example</strong>:",id:"pipeline-example",level:3},{value:"<strong>6. Advantages of Using Pre-Computed Remap</strong>",id:"6-advantages-of-using-pre-computed-remap",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:["Here\u2019s a breakdown of the ",(0,s.jsx)(n.strong,{children:"working principle of the remap operation"})," under the given conditions, formatted in ",(0,s.jsx)(n.strong,{children:"Markdown"}),":"]}),"\n",(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"working-principle-of-the-remap-operation-on-renesas-rzg2l",children:"Working Principle of the Remap Operation on Renesas RZ/G2L"})}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.strong,{children:"remap operation"})," is used to correct fisheye distortion and project the input image (from a fisheye source) into a different format (e.g., equirectangular projection). On the Renesas RZ/G2L, this is optimized by ",(0,s.jsx)(n.strong,{children:"precomputing mapping tables"})," and performing only the remap operation at runtime. Below is a detailed breakdown of the working principle."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"1-input-sources",children:(0,s.jsx)(n.strong,{children:"1. Input Sources"})}),"\n",(0,s.jsx)(n.p,{children:"The system receives input from a fisheye video source, which could be:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.strong,{children:"Image files"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.strong,{children:"Video files"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.strong,{children:"Live camera feed"})}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"The fisheye source contains distorted images due to the wide-angle lens. The goal is to remap the distorted pixels to a corrected format."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"2-pre-computed-mapping-tables",children:(0,s.jsx)(n.strong,{children:"2. Pre-Computed Mapping Tables"})}),"\n",(0,s.jsxs)(n.p,{children:["Mapping tables contain the pre-calculated coordinates ",(0,s.jsx)(n.code,{children:"(X, Y)"})," for each pixel in the corrected image:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Purpose"}),":","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Map each pixel in the output frame to its corresponding position in the input fisheye frame."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Generated During Development"}),":","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Based on camera parameters (e.g., optical center, field of view, lens distortion characteristics)."}),"\n",(0,s.jsx)(n.li,{children:"Stored in a binary file or arrays for runtime use."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"3-runtime-remap-process",children:(0,s.jsx)(n.strong,{children:"3. Runtime Remap Process"})}),"\n",(0,s.jsx)(n.p,{children:"At runtime, the remap operation applies the precomputed mappings to the input frames to produce the corrected output."}),"\n",(0,s.jsxs)(n.h3,{id:"steps",children:[(0,s.jsx)(n.strong,{children:"Steps"}),":"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Load Mapping Tables"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Mapping tables are loaded into memory during application startup."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"For Each Input Frame"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Pixel Remapping"}),":","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["For each pixel ",(0,s.jsx)(n.code,{children:"(u, v)"})," in the output image:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Look up the corresponding ",(0,s.jsx)(n.code,{children:"(x, y)"})," coordinates from the mapping table."]}),"\n",(0,s.jsxs)(n.li,{children:["Retrieve the pixel value from the input fisheye frame at ",(0,s.jsx)(n.code,{children:"(x, y)"}),"."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Interpolate pixel values if the mapped coordinates ",(0,s.jsx)(n.code,{children:"(x, y)"})," are non-integer."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Output Corrected Frame"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"The output frame is constructed pixel by pixel using the remapped values."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"4-hardware-acceleration-on-renesas-rzg2l",children:(0,s.jsx)(n.strong,{children:"4. Hardware Acceleration on Renesas RZ/G2L"})}),"\n",(0,s.jsx)(n.p,{children:"The Renesas RZ/G2L platform uses hardware acceleration to enhance the performance of the remap operation:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Efficient Memory Access"}),":","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Mapping tables are stored in fast memory for quick lookups."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Multimedia Hardware Support"}),":","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"The RZ/G2L's graphics and multimedia capabilities accelerate pixel transformations and interpolation."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"5-gstreamer-pipeline-for-remap",children:(0,s.jsx)(n.strong,{children:"5. GStreamer Pipeline for Remap"})}),"\n",(0,s.jsx)(n.p,{children:"The remap process is integrated into the GStreamer pipeline for real-time video processing."}),"\n",(0,s.jsxs)(n.h3,{id:"pipeline-example",children:[(0,s.jsx)(n.strong,{children:"Pipeline Example"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"gst-launch-1.0 filesrc location=video.mp4 ! decodebin ! videoconvert ! remap mapping-table=precomputed_map.bin ! videoconvert ! autovideosink\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Key Elements"}),":","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"remap"}),": Applies the mapping table to the input frames."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"mapping-table=precomputed_map.bin"}),": Specifies the precomputed mapping table file."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"6-advantages-of-using-pre-computed-remap",children:(0,s.jsx)(n.strong,{children:"6. Advantages of Using Pre-Computed Remap"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Real-Time Performance"}),":","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"The pre-computation of mappings removes the need for runtime distortion calculations."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Reduced Computational Load"}),":","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Only pixel lookups and interpolation are performed during runtime."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Accuracy"}),":","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Precomputed tables ensure consistent transformation for every frame."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Hardware Efficiency"}),":","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Fully utilizes the RZ/G2L's hardware acceleration capabilities."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{})]})}function p(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>o,x:()=>l});var i=r(6540);const s={},t=i.createContext(s);function o(e){const n=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);